<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Employee Management System - XML</title>

<style>

body {
    font-family: 'Segoe UI', sans-serif;
    background: #0f172a;
    color: #e2e8f0;
    margin: 0;
    padding: 20px;
}

.container {
    max-width: 1000px;
    margin: auto;
}

h1 {
    text-align: center;
    color: #38bdf8;
}

.form {
    background: #1e293b;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 20px;
}

input, select {
    padding: 10px;
    margin: 5px;
    border-radius: 6px;
    border: none;
    background: #334155;
    color: white;
}

button {
    padding: 10px 15px;
    margin: 5px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
}

.add { background: #22c55e; }
.update { background: #eab308; }
.delete { background: #ef4444; }
.load { background: #38bdf8; }

button:hover {
    opacity: 0.8;
}

table {
    width: 100%;
    border-collapse: collapse;
    background: #1e293b;
}

th, td {
    padding: 12px;
    border-bottom: 1px solid #334155;
}

th {
    background: #334155;
}

tr:hover {
    background: #334155;
}

.message {
    padding: 10px;
    margin-top: 10px;
    border-radius: 6px;
}

.success { background: #14532d; }
.error { background: #7f1d1d; }

</style>

</head>
<body>

<div class="container">

<h1>Employee Management System</h1>

<div class="form">

<input type="number" id="id" placeholder="Employee ID">
<input type="text" id="name" placeholder="Name">

<select id="dept">
<option value="">Select Department</option>
<option>IT</option>
<option>HR</option>
<option>Finance</option>
<option>Marketing</option>
</select>

<input type="number" id="salary" placeholder="Salary">

<br>

<button class="add" onclick="addEmployee()">Add</button>
<button class="update" onclick="updateEmployee()">Update</button>
<button class="delete" onclick="deleteEmployee()">Delete</button>
<button class="load" onclick="loadEmployees()">Load Employees</button>

<div id="msg"></div>

</div>

<table>

<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Department</th>
<th>Salary</th>
</tr>
</thead>

<tbody id="tableBody">
</tbody>

</table>

</div>

<script>

let xmlDoc = null;

function showMessage(text, type)
{
    let msg = document.getElementById("msg");
    msg.innerHTML = text;
    msg.className = "message " + type;
}

function loadEmployees()
{
    let xhr = new XMLHttpRequest();

    xhr.open("GET", "employees.xml", true);

    xhr.onload = function()
    {
        try
        {
            xmlDoc = xhr.responseXML;

            if(!xmlDoc)
            {
                throw "Malformed XML";
            }

            displayEmployees();

            showMessage("Employees loaded successfully", "success");
        }
        catch(e)
        {
            showMessage("Error loading XML: " + e, "error");
        }
    };

    xhr.onerror = function()
    {
        showMessage("Error fetching XML file", "error");
    };

    xhr.send();
}

function displayEmployees()
{
    let table = document.getElementById("tableBody");
    table.innerHTML = "";

    let employees = xmlDoc.getElementsByTagName("employee");

    if(employees.length === 0)
    {
        showMessage("No employees found", "error");
        return;
    }

    for(let emp of employees)
    {
        let id = emp.getElementsByTagName("id")[0].textContent;
        let name = emp.getElementsByTagName("name")[0].textContent;
        let dept = emp.getElementsByTagName("department")[0].textContent;
        let salary = emp.getElementsByTagName("salary")[0].textContent;

        let row = `
        <tr>
        <td>${id}</td>
        <td>${name}</td>
        <td>${dept}</td>
        <td>â‚¹${salary}</td>
        </tr>
        `;

        table.innerHTML += row;
    }
}

function addEmployee()
{
    if(!xmlDoc)
    {
        showMessage("Load XML first", "error");
        return;
    }

    let id = document.getElementById("id").value;
    let name = document.getElementById("name").value;
    let dept = document.getElementById("dept").value;
    let salary = document.getElementById("salary").value;

    if(!id || !name || !dept || !salary)
    {
        showMessage("Fill all fields", "error");
        return;
    }

    let emp = xmlDoc.createElement("employee");

    emp.innerHTML =
        `<id>${id}</id>
         <name>${name}</name>
         <department>${dept}</department>
         <salary>${salary}</salary>`;

    xmlDoc.documentElement.appendChild(emp);

    displayEmployees();

    showMessage("Employee added successfully", "success");
}

function updateEmployee()
{
    let id = document.getElementById("id").value;

    let employees = xmlDoc.getElementsByTagName("employee");

    for(let emp of employees)
    {
        if(emp.getElementsByTagName("id")[0].textContent == id)
        {
            emp.getElementsByTagName("department")[0].textContent =
                document.getElementById("dept").value;

            emp.getElementsByTagName("salary")[0].textContent =
                document.getElementById("salary").value;

            displayEmployees();

            showMessage("Employee updated successfully", "success");
            return;
        }
    }

    showMessage("Employee not found", "error");
}

function deleteEmployee()
{
    let id = document.getElementById("id").value;

    let employees = xmlDoc.getElementsByTagName("employee");

    for(let emp of employees)
    {
        if(emp.getElementsByTagName("id")[0].textContent == id)
        {
            emp.remove();

            displayEmployees();

            showMessage("Employee deleted successfully", "success");

            return;
        }
    }

    showMessage("Employee not found", "error");
}

window.onload = loadEmployees;

</script>

</body>
</html>
